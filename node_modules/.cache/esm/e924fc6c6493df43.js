let arg,startGenerate,chalk,listFiles,convertToFullpath;_649‍.x([["cli",()=>cli]]);_649‍.w("arg",[["default",["arg"],function(v){arg=v}]]);_649‍.w("./main",[["startGenerate",["startGenerate"],function(v){startGenerate=v}]]);_649‍.w("chalk",[["default",["chalk"],function(v){chalk=v}]]);_649‍.w("./utils",[["listFiles",["listFiles"],function(v){listFiles=v}],["convertToFullpath",["convertToFullpath"],function(v){convertToFullpath=v}]]);



function parseArgumentsIntoOptions(rawArgs) {
  const args = arg(
    {
      "--help": Boolean,
      "--generate": String,
      "--name": String,
      "-g": "--generate",
      "-h": "--help",
      "-n": "--name"
    },
    {
      argv: rawArgs.slice(2)
    }
  );
  return {
    generate: args["--generate"],
    help: args["--help"] || false,
    name: args["--name"]
  };
}

function printHelp() {
  console.log(`stacker CLI : Usage (stacker --help)
  stacker [option] <args>
  options:
      --generate, -g  <type> [app, endpoint]
      --name, -n  <name> default app1
`);
}

       async function cli(args) {
  let options;
  try {
    options = parseArgumentsIntoOptions(args);

    const shortcut = args[2] === "." || args.length === 2;
    if ((!options.generate && !shortcut) || options.help) {
      printHelp();
      return;
    }

    const files = await listFiles(".");
    const fullfiles = await convertToFullpath(files);
    await startGenerate(fullfiles, options, shortcut);
  } catch (error) {
    _649‍.g.console.log(error);

    _649‍.g.console.log(chalk.red(error.message));
    console.log("--------------------------");
    printHelp();
    return;
  }
}
